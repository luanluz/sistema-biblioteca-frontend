<div class="bg-white border border-gray-200 rounded-lg">
    <div class="pt-4 px-4">
        <p-toolbar class="mb-6">
            <ng-template #start>
                <h5 class="m-0">Gerenciar Assuntos</h5>
            </ng-template>
            <ng-template #end>
                <p-button label="Novo" icon="pi pi-plus" class="mr-2" (onClick)="openNew()"/>
            </ng-template>
        </p-toolbar>
    </div>

    <div class="bg-white border border-gray-200 rounded-lg mx-4 mb-4">
        <p-table
            [value]="assuntos"
            [rows]="rows"
            [paginator]="true"
            [rowsPerPageOptions]="[10, 20, 50, 100]"
            [totalRecords]="totalRecords"
            [tableStyle]="{ 'min-width': '50rem' }"
            [rowHover]="true"
            dataKey="codigo"
            currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} assuntos"
            [showCurrentPageReport]="true"
            [loading]="loading"
            (onPage)="onPageChange($event)"
            [lazy]="true"
        >
            <ng-template #header>
                <tr>
                    <th>Código</th>
                    <th>Descrição</th>
                    <th>Ações</th>
                </tr>
            </ng-template>
            <ng-template #body let-assunto>
                <tr>
                    <td>{{ assunto.codigo }}</td>
                    <td>{{ assunto.descricao }}</td>
                    <td>
                        <p-buttongroup>
                            <p-button
                                icon="pi pi-pencil"
                                (click)="editAssunto(assunto)"
                                severity="secondary"
                            />
                            <p-button
                                icon="pi pi-eye"
                                (click)="viewAssunto(assunto)"
                                severity="secondary"
                            />
                            <p-button
                                icon="pi pi-trash"
                                severity="contrast"
                                (click)="deleteAssunto(assunto)"
                            />
                        </p-buttongroup>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <app-assunto-form
        [(visible)]="formDrawerVisible"
        [assuntoCodigo]="selectedAssuntoCodigo"
        (eventEmitterSave)="onSaveSuccess()"
    />

    <app-assunto-view
        [(visible)]="viewDrawerVisible"
        [assuntoCodigo]="viewAssuntoCodigo"
    />

    <p-confirmDialog [style]="{ width: '450px', maxWidth: '100vw' }"/>
</div>
